# Connect Hub 系統設計說明

本文件統整 Connect Hub 專案的整體系統設計重點，協助產品與工程團隊在進入開發前，對平台結構、模組邏輯與技術決策有一致的理解。設計內容延伸自《requirements.md》與《mvp-development-plan.md》，涵蓋核心模組、資料流程、介面規格與非功能性設計。

## 1. 設計原則
- **模組化**：以活動管理、社群互動、人才媒合與營運分析四大域界定服務邊界，降低跨模組耦合。
- **事件驅動與 API 優先**：後端服務以 RESTful API 提供對外介面，透過事件匯流排整合跨模組行為。
- **AI 協作**：對應 AI-DLC，為 AI 推薦、媒合與分析模組預留模型生命週期管理與回饋回圈。
- **安全與合規**：在設計階段納入身分驗證、授權、資料遮罩與稽核紀錄。

## 2. 整體架構
```
[Web / Mobile Clients]
        |
   [API Gateway]
        |
 -----------------------------------------------------
| 活動服務 | 社群服務 | 人才媒合服務 | 營運分析服務 |
 -----------------------------------------------------
        |
    [事件匯流排]
        |
  [資料湖 / DW]----[特徵工程與模型服務]
        |
   [BI / Monitoring]
```

### 2.1 前端層
- React / Vue 單頁應用，採取元件化設計，重複利用活動列表、媒合卡片、分析儀表板等組件。
- 透過 GraphQL BFF 或 REST API 整合後端資料，利用 WebSocket/Server-Sent Events 提供即時通知。

### 2.2 服務層
- **活動服務**：負責活動建立、報名、票務、排程與提醒，與通知系統整合。
- **社群服務**：管理用戶資料、圈組與互動，提供貼文、留言與讚等社交功能。
- **人才媒合服務**：聚焦成員技能、專案需求與媒合演算法，與 AI 推薦模型互動。
- **營運分析服務**：收集各模組指標，產出儀表板與報表，提供 KPI 追蹤。
- 每個服務包裝獨立資料庫 schema，透過 API Gateway 暴露介面，並在重要操作時發出事件。

### 2.3 資料與 AI 層
- **資料管線**：使用 CDC / 事件方式同步 OLTP 資料到資料湖，定期 ETL 至資料倉儲。
- **特徵工程**：根據活動參與、社群互動與技能標籤建立特徵集，支援推薦與媒合模型。
- **模型服務**：部署推薦排序、媒合匹配與成效預測模型，支援 A/B 測試與模型版本控制。
- **模型監控**：跟蹤資料漂移、預測準確度與回饋迴圈，符合 AI-DLC 的持續改進要求。

## 3. 主要模組設計

### 3.1 活動管理模組
- **核心流程**：活動建立 → 審核/排程 → 公開報名 → 票務管理 → 成效分析。
- **關鍵功能**：動態票種設定、候補/候補轉換、自動通知參與者。
- **資料模型**：`Event`, `TicketType`, `Registration`, `Session`, `Feedback`。
- **外部整合**：與支付服務、信件與推播服務、日曆同步 API。

### 3.2 社群與 CRM 模組
- **核心流程**：用戶註冊 → 身分驗證 → 社群圈組 → 內容互動 → CRM 標籤維護。
- **資料模型**：`User`, `Organization`, `Circle`, `Post`, `Interaction`, `CRMTag`。
- **AI 協作點**：社群互動分群、推薦圈組與文章，產生內容洞察。

### 3.3 人才媒合模組
- **核心流程**：需求建立 → 人才資料蒐集 → AI 媒合推薦 → 人工審核 → 成交追蹤。
- **資料模型**：`TalentProfile`, `Skill`, `Opportunity`, `MatchRecommendation`, `Interview`。
- **AI 協作點**：以技能與活動參與資料生成候選清單，提供解釋性指標。

### 3.4 營運分析模組
- **核心流程**：資料接收 → 指標計算 → 儀表板呈現 → 異常告警。
- **資料模型**：事實表（活動參與、社群互動、媒合成效）與維度表（時間、地區、產業）。
- **AI 協作點**：使用預測模型估算活動報名量、媒合成功率與客戶流失風險。

## 4. 介面設計與 API

### 4.1 API Gateway
- 統一 JWT/OAuth 2.0 驗證與角色權限檢查。
- 支援速率限制與 API key 管理，保護後端服務。
- 提供 OpenAPI / GraphQL Schema 做為前後端契約。

### 4.2 服務 API 範例
- `POST /events`: 建立活動，驗證主辦者權限，觸發活動建立事件。
- `GET /events/{id}/recommendations`: 呼叫推薦服務取得個人化活動清單。
- `POST /matches`: 人才媒合結果提交，支援 AI 建議與人工調整。
- `GET /analytics/dashboard`: 取得營運儀表板資料，支援動態篩選。

## 5. 非功能性設計
- **可用性**：採用多 AZ 部署與自動擴充，確保 99.5% SLA；關鍵事件佈署後實施自動化健康檢查。
- **擴充性**：服務容器化，透過 Kubernetes / ECS 管理；資料管線使用可橫向擴充的串流平台（Kafka）。
- **安全性**：資料庫加密、欄位遮罩、稽核日誌；遵循 GDPR/地方法規的個資管理。
- **可觀測性**：佈建集中式 logging、metrics 與 tracing，建立即時告警。

## 6. AI-DLC 整合要點
- 導入資料治理工作流，對模型輸入資料進行品質評估與異常告警。
- 為模型部署設計金絲雀釋出與自動回滾策略，確保服務穩定。
- 建立 Feedback Loop，收集用戶互動與營運指標作為模型再訓練依據。
- 為 PM、資料科學家與法遵角色設計工作看板與審核節奏，符合 AI-DLC 守門節點。

## 7. 後續工作項目
1. 製作詳細的 UI Wireframe 與互動流程，支援前端開發。
2. 細化資料庫 ERD 與 API 規格文件，供後端與資料工程參考。
3. 設計模型訓練、部署與監控的 DevOps/ML Ops pipeline。
4. 定義安全測試與隱私風險評估流程，納入上線前檢查。

以上設計可作為進入開發迭代前的基礎參考，後續可依據實際需求演進進行調整與細化。
